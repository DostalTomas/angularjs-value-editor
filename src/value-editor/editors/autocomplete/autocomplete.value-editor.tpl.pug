div.kp-autocomplete.input-group(ng-class="'input-group-' + $ctrl.valueEditorController.size")
    input.form-control(
        id="{{$ctrl.valueEditorController.editorId}}"
        name="{{$ctrl.valueEditorController.editorName}}"
        placeholder="{{$ctrl.valueEditorController.placeholder}}"

        ng-model="$ctrl.model"
        ng-model-options="{getterSetter: true}"

        ng-focus="$ctrl.fetchItemsIfNeed()"

        uib-typeahead="item for item in $ctrl.items | nullAwareFilter : $viewValue"
        typeahead-min-length="$ctrl.minLength"

        ng-disabled="$ctrl.valueEditorController.isDisabled"

        ng-class="'input-' + $ctrl.valueEditorController.size"

        ng-required="$ctrl.valueEditorController.validations.required"

        kp-async-validation="$ctrl.valueEditorController.validations.async"

        kp-focusable-input="$ctrl.connectToFocusApi($api)"

        error-messages

        data-main-input
    )

    span.input-group-btn
        button.btn.btn-default(
            type="button"

            ng-disabled="$ctrl.valueEditorController.isDisabled"

            ng-click="$ctrl.open()"

            ng-blur="$ctrl.resetMinLength()"
        )

            i.glyphicon.glyphicon-chevron-down(ng-hide="$ctrl.loading")
            ng-include(src="$ctrl.loadingSpinnerTemplateUrl" class="autocomplete-loading-svg" ng-show="$ctrl.loading")
